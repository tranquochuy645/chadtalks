import{r as g,j as e}from"./index-a2d0ecdf.js";const m=n=>{const i=/[A-Z]/,l=/[a-z]/,c=/[0-9]/;return n.length<8||!i.test(n)||!l.test(n)||!c.test(n)},h=({onLogin:n})=>{const[t,i]=g.useState(!0),l=()=>{i(r=>!r)},c=r=>{if(r.preventDefault(),t){const d=r.target.logUsername.value,o=r.target.logPassword.value;fetch("/api/v1/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:d,password:o})}).then(a=>{a.ok?a.json().then(s=>{s.access_token&&n(s.access_token)}):a.json().then(s=>{s.message&&alert(s.message)})}).catch(a=>{alert(a)})}else{const d=r.target.regUsername.value,o=r.target.regPassword.value,a=r.target.reRegPassword.value;if(o!=a)return alert("Passwords do not match");if(m(o))return alert("weak password");fetch("/api/v1/auth/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:d,password:o})}).then(s=>{s.json().then(u=>{u.message&&alert(u.message)})}).catch(s=>{alert(s)})}};return e.jsx("div",{id:"auth-page",children:e.jsxs("div",{className:"wrapper",children:[e.jsx("h2",{children:t?"Login":"Register"}),e.jsxs("form",{onSubmit:c,children:[t?e.jsxs("div",{className:`form ${t?"login":"register"} `,children:[e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"text",placeholder:"Username",name:"logUsername",required:!0}),e.jsx("i",{className:"bx bxs-user"})]}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"password",placeholder:"Password",name:"logPassword",required:!0}),e.jsx("i",{className:"bx bxs-lock-alt"})]})]}):e.jsxs("div",{className:`form ${t?"login":"register"} `,children:[e.jsx("div",{className:"input-box",children:e.jsx("input",{type:"text",placeholder:"Username",name:"regUsername",required:!0})}),e.jsx("div",{className:"input-box",children:e.jsx("input",{type:"password",placeholder:"Password",name:"regPassword",required:!0})}),e.jsx("div",{className:"input-box",children:e.jsx("input",{type:"password",placeholder:"Repeat Password",name:"reRegPassword",required:!0})})]}),e.jsx("button",{className:"btn",type:"submit",children:t?"Sign in":"Sign up"})]}),e.jsx("button",{className:"btn",onClick:l,children:t?"Sign up":"Go to sign in"})]})})};export{h as default};
